	*******************************************
	 XHisho アニメーション定義ファイル 解説
	   *******************************************

XHishoでは、背景画像としてアニメーション定義ファイルを指定することがで
きます。これにより、アニメーション画像を背景に指定することができます。

1. フォーマット

  基本的には、単純なテキストファイルになります。

  1行目は、アニメーション定義ファイルであることを示す文字列 "XHisho
  Animation File" だけから成ります。

  2行目以降は、アニメーションコマンドからなります。アニメーションコマ
  ンドは
   
    1)実際にアニメーションに使う画像ファイル名と、表示時間(0.1秒単位)
    2)GOTO文(後述)

  のいずれかです。



2. GOTO文

  GOTOを使った、制御文らしきものが書けます。書式は

  GOTO 行き先 回数

  です。行き先には、アニメーション定義コマンドの行数を指定します。回数
  は省略されると 1、-1 で無制限になります。




2. 実例

  例えば、「1.bmpを0.5秒、2.bmpを0.3秒、3.bmpを1秒、4.bmpを0.1秒」とい
  う順にアニメーションさせたい場合、定義ファイルは以下のようになります。

XHisho Animation File
1.bmp 5
2.bmp 3
3.bmp 10
4.bmp 1


  2つ目のフィールドの秒数を省略すると、1だと見なされます。


  先ほどと同じアニメーションで、「2.bmpを0.3秒、3.bmpを1秒」というシー
  ケンスを3回繰り返し、そのあとで4.bmpを表示したい場合は以下のようにな
  ります。

XHisho Animation File
1.bmp 5
2.bmp 3
3.bmp 10
GOTO 2 3
4.bmp 1



3. ファイル名の検索

  3行目以降のファイル名は、以下のルールで検索されます。

  (1)絶対パスとしてファイルを探す。無ければ次へ。
  (2)カレントディレクトリを探す。無ければ次へ。
  (3)アニメーション定義ファイルと同じディレクトリを探す。無ければエラー。



4. 制限事項


  (1)2行目に記述したファイルの個数と、実際のファイルの個数が一致しな
     い場合、少ない方に合わせられます。
  (2)当然ながら、アニメーションに使うファイルが多いほどメモリを食いま
     す。あまり多いと起動できないことがあります。
  (3)1枚の画像を表示するのに時間がかかる場合(Ex. 大きな画像、複雑な
     shape、計算機が遅い)、定義ファイルの記述通りにならないことがあり
     ます。
   (4)GOTO文は記述しにくい上にエラーチェックもいい加減ですので、注意し
      て使ってください。これは、今後の拡張のための仕様と考えてください。


